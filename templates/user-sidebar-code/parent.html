<style>
  /* Active top-level nav link */
  .nav-item > a.active {
    background-color: rgb(0, 119, 255);
    color: white !important;
    font-weight: bold;
    border-radius: 0.375rem;
  }

  /* Active submenu link */
  .collapse li a.active {
    background-color: rgb(0, 0, 0);
    color: #000 !important;
    font-weight: bold;
  }

  /* Submenu arrow rotation */
  .dropdown-arrow {
    float: right;
    transition: transform 0.3s ease;
  }

  .nav-item > a[aria-expanded="true"] .dropdown-arrow {
    transform: rotate(90deg);
  }

  /* Submenu styling */
  .collapse {
    list-style: none;
    padding-left: 0;
    margin-left: 0;
  }

  .collapse li {
    list-style-type: none;
    padding-left: 1.5rem;
  }

  .collapse li a {
    display: block;
    padding: 6px 12px;
    text-decoration: none;
    color: #333;
    border-radius: 0.25rem;
  }

  .collapse li a:hover {
    background-color: #f0f0f0;
  }
</style>


<li class="nav-item">
  <a href="{% url 'parent_dashboard' %}"
    ><i class="fas fa-tachometer-alt"></i>
    <p>Dashboard</p></a
  >
</li>
<li class="nav-item">
  <a href="#"
    ><i class="fas fa-user-graduate"></i>
    <p>My Children</p></a
  >
</li>
<li class="nav-item">
  <a href="#"
    ><i class="fas fa-calendar-alt"></i>
    <p>Events</p></a
  >
</li>
<li class="nav-item">
  <a href="#"
    ><i class="fas fa-bell"></i>
    <p>Notifications</p></a
  >
</li>
<li class="nav-item">
  <a
    data-bs-toggle="collapse"
    href="#messages"
    role="button"
    aria-expanded="false"
    aria-controls="messages"
    >
    <i class="fas fa-user-tie"></i>
    <p>Messages</p>
    <i class="fas fa-angle-right dropdown-arrow"></i>
    </a>
  <ul class="collapse" id="messages">
    <li><a href="">Sent to Staff(OUTBOX)</a></li>
    <li><a href="">Received from Staff(INBOX)</a></li>
    <li><a href="">Sent to Student(OUTBOX)</a></li>
    <li><a href="">Received from Student(INBOX)</a></li>
    <li><a href="">Sent to Parent(OUTBOX)</a></li>
    <li><a href="">Received from Parent(INBOX)</a></li>
  </ul>
</li>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const currentPath = window.location.pathname;

    document.querySelectorAll('.nav-item a[href]').forEach(link => {
      const linkPath = link.getAttribute('href');

      if (linkPath && (linkPath === currentPath || currentPath.startsWith(linkPath))) {
        link.classList.add('active');

        const parentCollapse = link.closest('.collapse');
        if (parentCollapse) {
          parentCollapse.classList.add('show');
          const toggleLink = parentCollapse.previousElementSibling;
          if (toggleLink && toggleLink.tagName === "A") {
            toggleLink.setAttribute('aria-expanded', 'true');
            toggleLink.classList.add('active');
          }
        }
      }
    });
  });
</script>
